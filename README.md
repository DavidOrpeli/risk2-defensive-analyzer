# 🛡️ מנתח נכסים דפנסיביים

מערכת מתקדמת לניתוח וזיהוי נכסים דפנסיביים בשוק ההון האמריקאי.

## 🌟 תכונות עיקריות

### 📊 דשבורד מעוצב
- עיצוב בכחול ולבן עם אלמנטים ויזואליים מתקדמים
- ממשק משתמש אינטואיטיבי עם סייד בר לניהול
- בחירת סקטורים חכמה עם 11 סקטורים שונים

### 🔍 ניתוח מתקדם
- 6 כללים מרכזיים לבחירת נכסים דפנסיביים
- ציון משוקלל לכל כלל (1-10)
- ציון כולל ודירוג סופי לכל מניה
- ניתוח של 627 מניות מ-11 סקטורים

### 📈 תרשימים אינטראקטיביים
- מפת פיזור - מיפוי נכסים לפי בטא ומתאם
- תרשים דירוגים - רמת הדפנסיביות לכל מניה
- תרשים רדאר - פרופיל מפורט לכל מניה

### ⚙️ התאמה אישית
- בחירת סקטורים עם כפתורי "בחר הכל" ו"נקה הכל"
- תצוגה נפרדת לכל סקטור ותצוגה כוללת
- בנצ'מארק קבוע: S&P 500 (SPY)

### 📄 יצירת דוחות
- **ייצוא CSV** - הורדת נתונים לעיבוד נוסף
- **יצירת PDF** - דוח מקצועי ומפורט
- **שליחת מייל** - שליחה אוטומטית ל-dudio@amitim.com

## 📋 הכללים הנותחים

1. **בטא יציבה (0.6-0.85)** - רגישות מתונה לשוק
2. **עמידות במשבר** - ביצועים טובים יותר מהמדד בירידות
3. **מתאם יציב (0.5-0.8)** - קשר מאוזן עם השוק
4. **תנודתיות נמוכה** - פחות סיכון מהמדד
5. **יציבות מגמה** - זמן רב מעל הממוצע הנע
6. **תמחור סביר** - ניתוח Percentile היסטורי של מכפילים (P/E, P/B)

## 🚀 התקנה והפעלה

### דרישות מערכת
- Python 3.8 ואילך
- חיבור לאינטרנט (לשליפת נתוני מניות)

### התקנה

1. **שכפל את הפרויקט:**
```bash
git clone [repository-url]
cd defensive-assets-analyzer
```

2. **התקן חבילות:**
```bash
pip install -r requirements.txt
```

3. **הפעל את המערכת:**
```bash
streamlit run defensive.py
```

4. **גש לכתובת:**
```
http://localhost:8501
```

## ⚙️ הגדרת שליחת מייל

להפעלת שליחת דוחות במייל, ערוך את הפונקציה `send_email_with_pdf` בקובץ `defensive.py`:

### Gmail
```python
smtp_server = "smtp.gmail.com"
smtp_port = 587
sender_email = "your-email@gmail.com"  # המייל שלך
sender_password = "your-app-password"  # App Password מ-Gmail
```

### יצירת App Password ב-Gmail:
1. עבור להגדרות Google Account
2. Security → 2-Step Verification
3. App passwords → Generate password
4. בחר "Mail" והעתק את הסיסמה

### ספקי מייל אחרים:
עדכן את `smtp_server` ו-`smtp_port` בהתאם לספק שלך.

## 📊 תוכן דוח PDF

הדוח הכולל כולל:

- **📈 סיכום ביצועים כללי** - סטטיסטיקות כוללות
- **🎯 ביצועים לפי סקטורים** - ניתוח מפורט לכל סקטור
- **🌟 רשימת המניות הטובות ביותר** - 20 המניות המובילות
- **📋 הסבר מתודולוגיה** - פירוט מלא של שיטת החישוב

## 🔧 שימוש במערכת

### בחירת סקטורים
1. בחר סקטורים מהסייד בר (לפחות אחד)
2. השתמש בכפתורים "בחר הכל" או "נקה הכל"
3. לחץ "הפעל ניתוח"

### צפייה בתוצאות
1. **סיכום כללי** - מספרים עיקריים
2. **ביצועים לפי סקטורים** - תרשים אינטראקטיבי
3. **מפת נכסים** - פיזור בטא מול מתאם
4. **פירוט לסקטורים** - כרטיסיות מעוצבות
5. **טבלה מלאה** - כל הנתונים

### הורדת נתונים
1. **CSV** - לעיבוד במערכות אחרות
2. **PDF** - דוח מקצועי להדפסה
3. **מייל** - שליחה אוטומטית

## 📚 מתודולוגיה

### בטא (Beta)
```
Beta = Covariance(Stock_Returns, Market_Returns) / Variance(Market_Returns)
```

### מקסימום דראודאון
```
Peak = מחיר המקסימום עד היום
Drawdown = (Current_Price - Peak) / Peak
```

### מתאם (Correlation)
```
Correlation = Covariance(Stock, Market) / (Std(Stock) * Std(Market))
```

### תנודתיות (Volatility)
```
Volatility = Std(Daily_Returns) * sqrt(252)
```

### יציבות מגמה
```
Percentage = Days_Above_MA_200 / Total_Days
```

## 🎯 מדרג ציונים

- **8-10:** נכס דפנסיבי מצוין 🌟
- **6-8:** נכס דפנסיבי טוב 👍
- **4-6:** נכס דפנסיבי חלש ⚠️
- **0-4:** לא מתאים כנכס דפנסיבי ❌

## 📊 מקורות נתונים

- **Yahoo Finance** - מחירי מניות ונתוני שוק
- **S&P 500 (SPY)** - בנצ'מארק השוק
- **תקופת ניתוח** - 3 שנים אחרונות

## 💡 טיפים לשימוש

1. **בחר מספר סקטורים** לגיוון הניתוח
2. **השווה תוצאות** בין סקטורים שונים
3. **שים לב לציון הכולל** ולא רק לכלל אחד
4. **השתמש בדוח PDF** להצגות ודיונים
5. **עדכן נתונים** מעת לעת (הרצה מחדש)

## 🔒 אבטחה והגנה

- המערכת כוללת מנגנוני הגנה על שגיאות
- בדיקות אפס למניעת חלוקה באפס
- יישור תאריכים לטיפול בנתונים חסרים
- ולידציה של נתונים לפני חישובים

## 📞 תמיכה

המערכת מבוססת על מחקר אקדמי בתחום הפיננסים והפורמולות מקובלות בתעשיית ההשקעות העולמית.

לשאלות או בעיות טכניות, ניתן לפנות דרך המייל שהוגדר במערכת.

---

**🛡️ מנתח נכסים דפנסיביים - כלי מתקדם למשקיעים מקצועיים** 